<!doctype html>
<html>
<head>
    <title>My Test Page</title>
    <link rel="stylesheet" href="./test/jasmine2.css">
    <script> var testPage = 'nvd3';</script>
    <script src="./test/jasmine2.js"></script>
    <script src="./test/jasmine2-html.js"></script>
    <script src="./test/jasmine2-boot.js"></script>
    <script src="/testem.js"></script>

    <link href="./nvd3/src/nv.d3.css" rel="stylesheet" type="text/css">
    <link href="./menu.css" rel="stylesheet" type="text/css">

    <style>
        svg#main { padding-top: 70px; }
    </style>

    <script src="./sequence-viz/bower_components/d3/d3.js"></script>
    <script src="./sequence-viz/bower_components/underscore/underscore.js"></script>
    <script src="./sequence-viz/bower_components/1670507/underscoreAddon.js"></script>
    <script src="./sequence-viz/bower_components/momentjs/moment.js"></script>
    <script src="./underscore-unchained/underscore-unchained.js"></script>
    <script src="./supergroup/supergroup.js"></script>
    <script src="./sequence-viz/evtData.js"></script>
    <script src="./sequence-viz/lifeflowData.js"></script>
    <script src="./sequence-viz/lifeflow.js"></script>
    <script src="./sequence-viz/timelines.js"></script>
    <script src="./sequence-viz/lifeflowExtras.js"></script>

    <script src="./nvd3/nv.d3.js"></script>
    <script src="./nvd3/src/models/axis.js"></script>
    <script src="./nvd3/src/models/lifeflowChart.js"></script>

    <script src="./test/sequence-viz-demo-spec.js"></script>
    <script src="./sequence-viz/test/sequence-viz-spec.js"></script>
</head>
<body>
    <script>
        /*
        var reporter = new jasmine.HtmlReporter
        //var reporter = new jasmine.TrivialReporter
            , env = jasmine.getEnv();
        env.specFilter = function(spec){
            return reporter.specFilter(spec)
        }
        env.addReporter(reporter)
        env.execute()
        */
        function makeChart(bucket) {
            nv.addGraph(function() {
                var chart = nv.models.lifeflowChart()
                            .eventNodeWidth(bucket.eventNodeWidth);

                chart.xAxis
                    .tickFormat(function(d) { return d3.time.format('%x')(new Date(d)) });

                chart.yAxis
                    .tickFormat(d3.format(','));


                bucket.container.datum(bucket.nodeList)
                    .transition().duration(500).call(chart);

                nv.utils.windowResize(chart.update);

                bucket.chart = chart;
                bucket.done();
                return chart;
            });
        }
        jasmine.getEnv().execute();

    </script>
</body>
</html>
